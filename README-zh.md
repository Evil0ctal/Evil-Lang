# Evil Lang ğŸ”®

[![Version](https://img.shields.io/badge/version-1.0.1-blue)](https://github.com/Evil0ctal/Evil-Lang)
[![Python](https://img.shields.io/badge/python-3.6+-yellow)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green)](https://github.com/Evil0ctal/Evil-Lang/blob/main/LICENSE)
[![Stars](https://img.shields.io/github/stars/Evil0ctal/Evil-Lang?style=social)](https://github.com/Evil0ctal/Evil-Lang)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/Evil0ctal/Evil-Lang/pulls)
![View Count](https://views.whatilearened.today/views/github/Evil0ctal/Evil-Lang.svg)
[![Made with â¤ï¸](https://img.shields.io/badge/made%20with-%E2%9D%A4%EF%B8%8F-red)](https://github.com/Evil0ctal)

**Evil Lang(Evil Program Language)** æ˜¯ä¸€æ¬¾è½»é‡çº§ã€å¯Œæœ‰è¡¨ç°åŠ›çš„è§£é‡Šå‹ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒèåˆäº†å‘½ä»¤å¼å’Œå‡½æ•°å¼ç¼–ç¨‹çš„ç²¾åï¼Œä¸“ä¸ºæ•™è‚²ä¸å­¦ä¹ ç¼–ç¨‹è¯­è¨€å®ç°åŸç†è€Œè®¾è®¡ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªç¼–ç¨‹è¯­è¨€ï¼Œæ›´æ˜¯ä¸€æ¬¡ç©¿è¶Šç¼–ç¨‹è¯­è¨€å†…éƒ¨å¥¥ç§˜çš„å†’é™©ä¹‹æ—…ï¼

<p align="center">
  <img src="/assets/EPL.jpg" alt="Evil Lang Logo" width="100"/>
</p>

```javascript
// Evil Lang ä»£ç ç¤ºä¾‹ï¼šé—­åŒ…ä¸é«˜é˜¶å‡½æ•°
func createFibGenerator() {
    var a = 0;
    var b = 1;
    
    func next() {
        var temp = a;
        a = b;
        b = temp + b;
        return temp;
    }
    
    return next;
}

var fib = createFibGenerator();
for (var i = 0; i < 10; i = i + 1) {
    print(fib() + " ");  // æ‰“å°æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰10é¡¹
}
```

## ğŸ“¢ æ›´æ–°æ—¥å¿— (v1.0.1)

æœ¬æ¬¡æ›´æ–°é‡ç‚¹æ”¹è¿›äº†é”™è¯¯å¤„ç†å’Œå†…ç½®å‡½æ•°ç³»ç»Ÿï¼Œä½¿ Evil Lang æ›´åŠ æ˜“äºä½¿ç”¨å’Œæ‰©å±•ï¼š

* âœ… **å¢å¼ºçš„é”™è¯¯æŠ¥å‘Šç³»ç»Ÿ** - å®ç°äº†å®Œæ•´çš„è°ƒç”¨å †æ ˆè¿½è¸ªï¼Œæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä½ç½®å’Œé”™è¯¯ä¸Šä¸‹æ–‡
* âœ… **å½©è‰²é”™è¯¯è¾“å‡º** - ä½¿ç”¨ ANSI é¢œè‰²ä»£ç çªå‡ºæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæé«˜å¯è¯»æ€§
* âœ… **å…¨è‹±æ–‡é”™è¯¯æ¶ˆæ¯** - æ ‡å‡†åŒ–é”™è¯¯æ¶ˆæ¯ä¸ºè‹±æ–‡ï¼Œæé«˜å›½é™…åŒ–å…¼å®¹æ€§
* âœ… **æ¨¡å—åŒ–å†…ç½®å‡½æ•°æ¶æ„** - é‡æ„å†…ç½®å‡½æ•°ç³»ç»Ÿï¼Œä½¿å…¶æ›´åŠ å¯æ‰©å±•
* âœ… **æ–°å¢ `typeof` å‡½æ•°** - æ”¯æŒè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥
* âœ… **æ”¹è¿›çš„ REPL ä½“éªŒ** - æ›´å¥½çš„äº¤äº’å¼ç¯å¢ƒï¼Œæ”¯æŒå½©è‰²è¾“å‡ºå’Œæ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
* âœ… **ä»£ç ç‰‡æ®µé«˜äº®** - åœ¨é”™è¯¯æŠ¥å‘Šä¸­æ˜¾ç¤ºå‡ºé”™çš„ä»£ç ç‰‡æ®µå¹¶ä½¿ç”¨è„±å­—ç¬¦(^)æŒ‡ç¤ºé”™è¯¯ä½ç½®

## ğŸš€ ç›®å½•

* [ä¸ºä»€ä¹ˆæ˜¯ Evil Langï¼Ÿ](#-ä¸ºä»€ä¹ˆæ˜¯-evil-lang)
* [ç‰¹è‰²åŠŸèƒ½](#-ç‰¹è‰²åŠŸèƒ½)
* [å®‰è£…ä¸ä½¿ç”¨](#-å®‰è£…ä¸ä½¿ç”¨)
* [è¯­è¨€ç‰¹æ€§è¯¦è§£](#-è¯­è¨€ç‰¹æ€§è¯¦è§£)
* [è¯­æ³•å‚è€ƒ](#-è¯­æ³•å‚è€ƒ)
* [å¹•åå®ç°åŸç†](#-å¹•åå®ç°åŸç†)
* [å¼€å‘è€…æŒ‡å—](#-å¼€å‘è€…æŒ‡å—)
* [æˆ‘ä»¬å…‹æœçš„æŒ‘æˆ˜](#-æˆ‘ä»¬å…‹æœçš„æŒ‘æˆ˜)
* [è®¾è®¡ç†å¿µ](#-è®¾è®¡ç†å¿µ)
* [æœªæ¥å‘å±•æ–¹å‘](#-æœªæ¥å‘å±•æ–¹å‘)
* [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
* [è®¸å¯è¯](#-è®¸å¯è¯)

## ğŸ” ä¸ºä»€ä¹ˆæ˜¯ Evil Langï¼Ÿ

åœ¨ä¼—å¤šç¼–ç¨‹è¯­è¨€çš„æµ·æ´‹ä¸­ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åˆ›é€  Evil Langï¼Ÿå› ä¸ºæ·±å…¥ç†è§£ç¼–ç¨‹è¯­è¨€çš„è®¾è®¡å’Œå®ç°è¿‡ç¨‹æ˜¯æ¯ä½ç¨‹åºå‘˜æˆé•¿é“è·¯ä¸Šçš„ä¸€é“é‡è¦å…³å¡ï¼

ä¸å…¶ä»–æ•™è‚²ç›®çš„è¯­è¨€ä¸åŒï¼ŒEvil Lang ä¸“æ³¨äºï¼š

* **å¹³è¡¡å¤æ‚åº¦å’Œå¯ç†è§£æ€§** - æˆ‘ä»¬çš„ä»£ç åº“åªæœ‰çº¦1000è¡ŒPythonä»£ç ï¼Œå´å®ç°äº†å®Œæ•´çš„ç¼–ç¨‹è¯­è¨€åŠŸèƒ½
* **å¯è§†åŒ–å†…éƒ¨æœºåˆ¶** - æä¾› `--debug` æ¨¡å¼ï¼Œè®©ä½ ä¸€æ­¥æ­¥çœ‹åˆ°è¯æ³•åˆ†æã€è¯­æ³•åˆ†æçš„è¿‡ç¨‹
* **äº²æ°‘çš„è¯­æ³•** - å€Ÿé‰´JavaScriptå’ŒCçš„è¯­æ³•ï¼Œé™ä½å­¦ä¹ æ›²çº¿
* **é—­åŒ…çš„ç®€æ´å®ç°** - æˆ‘ä»¬ç”¨ä¸åˆ°100è¡Œä»£ç å°±å®ç°äº†å®Œæ•´çš„é—­åŒ…åŠŸèƒ½ï¼Œæ¯”è®¸å¤šæ•™å­¦å®ç°æ›´ç®€æ´
* **ä¸­æ–‡å‹å¥½** - å†…ç½®å¯¹UTF-8çš„å®Œæ•´æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨ä¸­æ–‡å˜é‡åã€å­—ç¬¦ä¸²å’Œæ³¨é‡Š

Evil Lang ä¸æ˜¯ä¸ºäº†å–ä»£ä»»ä½•ç°æœ‰è¯­è¨€ï¼Œè€Œæ˜¯ä¸ºäº†è®©ä½ çœ‹åˆ°è¯­è¨€çš„éª¨æ¶ï¼Œç†è§£è¯­è¨€çš„çµé­‚ï¼

## âœ¨ ç‰¹è‰²åŠŸèƒ½

Evil Lang è™½ç„¶ç®€æ´ï¼Œä½†åŠŸèƒ½ä¸°å¯Œï¼Œèåˆäº†å¤šç§ç¼–ç¨‹èŒƒå¼çš„ç²¾åï¼š

### å‘½ä»¤å¼ç¼–ç¨‹

```javascript
var total = 0;
for (var i = 1; i <= 100; i = i + 1) {
    total = total + i;
}
print("1åˆ°100çš„å’Œæ˜¯: " + total);
```

### å‡½æ•°å¼ç¼–ç¨‹

```javascript
func map(arr, fn) {
    var result = [];
    for (var i = 0; i < arr.length; i = i + 1) {
        result[i] = fn(arr[i]);
    }
    return result;
}

var numbers = [1, 2, 3, 4, 5];
print(map(numbers, func(x) { return x * x; }));
```

### é—­åŒ…ä¸çŠ¶æ€ç®¡ç†

```javascript
func createLogger(prefix) {
    func log(message) {
        print(prefix + ": " + message);
    }
    return log;
}

var debugLogger = createLogger("DEBUG");
var errorLogger = createLogger("ERROR");

debugLogger("ç¨‹åºæ­£åœ¨è¿è¡Œ");
errorLogger("å‘ç°æœªå¤„ç†çš„å¼‚å¸¸");
```

## ğŸ“¦ å®‰è£…ä¸ä½¿ç”¨

### å‰ææ¡ä»¶

* Python 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
* å¥½å¥‡å¿ƒå’Œæ¢ç´¢ç²¾ç¥ï¼âœ¨

### è·å–ä»£ç 

```bash
git clone https://github.com/Evil0ctal/Evil-Lang.git
cd Evil-Lang
```

### è¿è¡Œ Evil Lang ç¨‹åº

```bash
python evil_lang.py examples/hello_world.el
```

### åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿è¡Œï¼ŒæŸ¥çœ‹è§£é‡Šå™¨å†…éƒ¨å·¥ä½œ

```bash
python evil_lang.py examples/advanced_example.el --debug
```

### ç¦ç”¨å½©è‰²è¾“å‡º (å¯¹äºä¸æ”¯æŒ ANSI é¢œè‰²çš„ç»ˆç«¯)

```bash
python evil_lang.py examples/hello_world.el --no-color
```

### åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Evil Lang ç¨‹åº

åˆ›å»ºæ–‡ä»¶ `hello.el`ï¼š

```javascript
// æˆ‘çš„ç¬¬ä¸€ä¸ªEvil Langç¨‹åº
print("Hello, Evil World!");

var name = input("è¯·è¾“å…¥ä½ çš„åå­—: ");
print("æ¬¢è¿æ¥åˆ°Evil Langçš„ä¸–ç•Œï¼Œ" + name + "ï¼");
```

ç„¶åè¿è¡Œï¼š

```bash
python evil_lang.py hello.el
```

## ğŸ”§ è¯­è¨€ç‰¹æ€§è¯¦è§£

Evil Lang èåˆäº†å¤šç§è¯­è¨€çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ä¿æŒç®€æ´å’Œä¸€è‡´æ€§ï¼š

### 1. ç±»å‹ç³»ç»Ÿ

Evil Lang æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œæ”¯æŒä»¥ä¸‹åŸºæœ¬ç±»å‹ï¼š

* **æ•°å€¼**ï¼šæ•´æ•°å’Œæµ®ç‚¹æ•°
* **å­—ç¬¦ä¸²**ï¼šæ”¯æŒ Unicode å’Œè½¬ä¹‰å­—ç¬¦
* **å¸ƒå°”å€¼**ï¼š`true` å’Œ `false`
* **ç©ºå€¼**ï¼š`null`
* **æ•°ç»„**ï¼šæ”¯æŒåµŒå¥—å’Œå¤šç»´æ•°ç»„
* **å¯¹è±¡**ï¼šç±»ä¼¼äº JavaScript å¯¹è±¡çš„é”®å€¼å¯¹ç»“æ„
* **å‡½æ•°**ï¼šä¸€ç­‰å…¬æ°‘ï¼Œå¯ä½œä¸ºå‚æ•°å’Œè¿”å›å€¼

ä¸ Python æˆ– JavaScript ä¸åŒï¼ŒEvil Lang çš„ç±»å‹ç³»ç»Ÿç®€å•æ˜äº†ï¼Œæ²¡æœ‰å¤æ‚çš„ç»§æ‰¿æˆ–åŸå‹é“¾ï¼Œè®©åˆå­¦è€…å®¹æ˜“ç†è§£ç±»å‹çš„åŸºæœ¬æ¦‚å¿µã€‚

æˆ‘ä»¬è¿˜æä¾›äº† `typeof` å†…ç½®å‡½æ•°ç”¨äºè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼š

```javascript
print(typeof(42));        // "number"
print(typeof("hello"));   // "string"
print(typeof(true));      // "boolean"
print(typeof(null));      // "null"
print(typeof([]));        // "array"
print(typeof({}));        // "object"
print(typeof(print));     // "function"
```

### 2. æ§åˆ¶æµ

Evil Lang æä¾›ç›´è§‚çš„æ§åˆ¶æµè¯­å¥ï¼š

* **æ¡ä»¶**ï¼š`if`, `else if`, `else`
* **å¾ªç¯**ï¼š`while`, `for`
* **è·³è½¬**ï¼š`break`, `continue`
* **ä¸‰å…ƒè¿ç®—ç¬¦**ï¼š`condition ? expr1 : expr2`

è¿™äº›æ§åˆ¶ç»“æ„çš„è¯­æ³•æ¥è¿‘ C å’Œ JavaScriptï¼Œä½¿åˆå­¦è€…è½»æ¾è¿‡æ¸¡åˆ°ä¸»æµè¯­è¨€ã€‚

### 3. å‡½æ•°ä¸é—­åŒ…

Evil Lang çš„å‡½æ•°ç³»ç»Ÿè®¾è®¡ç²¾å·§ï¼š

* **å‡½æ•°å®šä¹‰**ï¼šä½¿ç”¨ `func` å…³é”®å­—
* **å‚æ•°ä¼ é€’**ï¼šæ”¯æŒå€¼ä¼ é€’
* **è¿”å›å€¼**ï¼šä½¿ç”¨ `return` è¯­å¥
* **é€’å½’**ï¼šå®Œå…¨æ”¯æŒé€’å½’è°ƒç”¨
* **é—­åŒ…**ï¼šå‡½æ•°å¯ä»¥æ•è·å¹¶ä¿ç•™å¤–éƒ¨ç¯å¢ƒ

é—­åŒ…æ˜¯ Evil Lang çš„ä¸€å¤§ç‰¹è‰²â€”â€”æˆ‘ä»¬ä¸ä»…å®ç°äº†å®ƒï¼Œè¿˜ä½¿å…¶æ˜“äºç†è§£å’Œä½¿ç”¨ã€‚

```javascript
func makeAdder(x) {
    func add(y) {
        return x + y;  // æ•è·å¤–éƒ¨å˜é‡x
    }
    return add;
}

var add5 = makeAdder(5);
print(add5(10));  // è¾“å‡º15
```

### 4. æ•°æ®ç»“æ„

Evil Lang æ”¯æŒä¸¤ç§ä¸»è¦å¤åˆæ•°æ®ç»“æ„ï¼š

* **æ•°ç»„**ï¼šä½¿ç”¨æ–¹æ‹¬å· `[]` å®šä¹‰ï¼Œç´¢å¼•ä»0å¼€å§‹
* **å¯¹è±¡**ï¼šä½¿ç”¨èŠ±æ‹¬å· `{}` å®šä¹‰é”®å€¼å¯¹

è¿™äº›æ•°æ®ç»“æ„è™½ç„¶ç®€å•ï¼Œä½†è¶³ä»¥æ„å»ºå¤æ‚åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚

## ğŸ“š è¯­æ³•å‚è€ƒ

### å˜é‡ä¸èµ‹å€¼

```javascript
// å˜é‡å£°æ˜
var x = 42;
var name = "Evil Lang";
var isEnabled = true;

// å˜é‡èµ‹å€¼
x = x + 8;
name = name + " ç¼–ç¨‹è¯­è¨€";
```

### è¿ç®—ç¬¦

```javascript
// ç®—æœ¯è¿ç®—ç¬¦
var sum = a + b;
var diff = a - b;
var product = a * b;
var quotient = a / b;

// æ¯”è¾ƒè¿ç®—ç¬¦
var isEqual = a == b;
var isNotEqual = a != b;
var isGreater = a > b;
var isLess = a < b;

// é€»è¾‘è¿ç®—ç¬¦
var andResult = a && b;
var orResult = a || b;
var notResult = !a;
```

### æ¡ä»¶è¯­å¥

```javascript
if (score >= 90) {
    print("ä¼˜ç§€");
} else if (score >= 80) {
    print("è‰¯å¥½");
} else if (score >= 70) {
    print("ä¸­ç­‰");
} else if (score >= 60) {
    print("åŠæ ¼");
} else {
    print("ä¸åŠæ ¼");
}
```

### å¾ªç¯

```javascript
// whileå¾ªç¯
var i = 0;
while (i < 5) {
    print(i);
    i = i + 1;
}

// forå¾ªç¯
for (var j = 0; j < 5; j = j + 1) {
    print(j);
}
```

### æ•°ç»„æ“ä½œ

```javascript
// åˆ›å»ºæ•°ç»„
var fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"];

// è®¿é—®å…ƒç´ 
print(fruits[1]);  // è¾“å‡º"é¦™è•‰"

// ä¿®æ”¹å…ƒç´ 
fruits[0] = "æ¢¨";

// éå†æ•°ç»„
for (var i = 0; i < fruits.length; i = i + 1) {
    print(fruits[i]);
}
```

### å‡½æ•°

```javascript
// åŸºæœ¬å‡½æ•°
func greet(name) {
    return "ä½ å¥½, " + name + "!";
}

// å‡½æ•°è°ƒç”¨
print(greet("å°æ˜"));

// é€’å½’å‡½æ•°
func factorial(n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

// é«˜é˜¶å‡½æ•°
func operate(a, b, operation) {
    return operation(a, b);
}

func add(x, y) {
    return x + y;
}

print(operate(5, 3, add));  // è¾“å‡º8
```

## ğŸ”¬ å¹•åå®ç°åŸç†

Evil Lang çš„å®ç°éµå¾ªç»å…¸çš„ä¸‰æ­¥èµ°æ¶æ„ï¼Œä½†æˆ‘ä»¬æ³¨é‡ç®€æ´æ€§å’Œå¯ç†è§£æ€§ï¼š

### 1. è¯æ³•åˆ†æå™¨ (Lexer)

è¯æ³•åˆ†æå™¨æ˜¯ Evil Lang çš„"çœ¼ç›"ï¼Œå®ƒæ‰«ææºä»£ç æ–‡æœ¬ï¼Œè¯†åˆ«å‡ºç¨‹åºçš„åŸºæœ¬æ„å»ºå—ï¼š

```python
# Evil Langçš„è¯æ³•åˆ†æå™¨æ ¸å¿ƒåŸç†
class Lexer:
    def get_next_token(self):
        # è·³è¿‡ç©ºç™½å­—ç¬¦å’Œæ³¨é‡Š
        self.skip_whitespace()
        self.skip_comment()
        
        # å¤„ç†ä¸åŒç±»å‹çš„æ ‡è®°
        if self.current_char.isdigit():
            return self.get_number()
        elif self.current_char.isalpha() or self.current_char == '_':
            return self.get_identifier()
        elif self.current_char == '"':
            return self.get_string()
        # ... å…¶ä»–æ ‡è®°ç±»å‹
```

ä¸ä¼ ç»Ÿå®ç°ä¸åŒï¼Œæˆ‘ä»¬çš„è¯æ³•åˆ†æå™¨ï¼š

* **æ”¯æŒUnicode** - å¯ä»¥å¤„ç†ä¸­æ–‡ç­‰éASCIIå­—ç¬¦
* **æ™ºèƒ½å¤„ç†æ³¨é‡Š** - åŒºåˆ†ä»£ç å’Œæ³¨é‡Šï¼Œæå‡å¯è¯»æ€§
* **æä¾›ç²¾ç¡®é”™è¯¯ä½ç½®** - æŠ¥é”™æ—¶æŒ‡æ˜å…·ä½“çš„è¡Œå·å’Œåˆ—å·

### 2. è¯­æ³•åˆ†æå™¨ (Parser)

è¯­æ³•åˆ†æå™¨æ˜¯ Evil Lang çš„"å¤§è„‘"ï¼Œå®ƒå°†æ ‡è®°æµç»„ç»‡æˆæœ‰ç»“æ„çš„æŠ½è±¡è¯­æ³•æ ‘(AST)ï¼š

```python
# Evil Langçš„é€’å½’ä¸‹é™è¯­æ³•åˆ†æ
class Parser:
    def expr(self):
        """è§£æè¡¨è¾¾å¼"""
        node = self.logic_expr()
        
        # æ£€æŸ¥æ˜¯å¦æ˜¯ä¸‰å…ƒè¡¨è¾¾å¼
        if self.current_token.type == TokenType.OPERATOR and self.current_token.value == '?':
            self.eat(TokenType.OPERATOR)  # åƒæ‰é—®å·
            true_expr = self.expr()
            self.eat(TokenType.COLON)
            false_expr = self.expr()
            node = TernaryOp(node, true_expr, false_expr)
            
        return node
```

æˆ‘ä»¬çš„è¯­æ³•åˆ†æå™¨ç‰¹ç‚¹ï¼š

* **é€’å½’ä¸‹é™è§£æ** - æ¸…æ™°åæ˜ è¯­è¨€è¯­æ³•ç»“æ„
* **ä¼˜é›…å¤„ç†è¿ç®—ç¬¦ä¼˜å…ˆçº§** - ä½¿ç”¨ç‹¬ç«‹å‡½æ•°å¤„ç†ä¸åŒä¼˜å…ˆçº§
* **å¼ºå¤§çš„é”™è¯¯æ¢å¤** - åœ¨å‡ºé”™æ—¶æä¾›æœ‰æ„ä¹‰çš„æç¤º

### 3. è§£é‡Šå™¨ (Interpreter)

è§£é‡Šå™¨æ˜¯ Evil Lang çš„"å¿ƒè„"ï¼Œå®ƒéå†ASTå¹¶æ‰§è¡Œç›¸åº”æ“ä½œï¼š

```python
# Evil Langçš„è§£é‡Šå™¨æ ¸å¿ƒ
class Interpreter:
    def visit_FuncCall(self, node):
        """å‡½æ•°è°ƒç”¨å¤„ç†"""
        # å‡†å¤‡å‚æ•°
        arg_values = [self.visit(arg) for arg in node.arguments]
        
        # æŸ¥æ‰¾å¹¶è°ƒç”¨å‡½æ•°
        if node.name in self.functions:
            func_node = self.functions[node.name]
            
            # åˆ›å»ºæ–°ä½œç”¨åŸŸ
            saved_scope = self.global_scope.copy()
            new_scope = saved_scope.copy()
            
            # ç»‘å®šå‚æ•°
            for i, param in enumerate(func_node.params):
                new_scope[param.value] = arg_values[i]
                
            # è®¾ç½®æ–°ä½œç”¨åŸŸå¹¶æ‰§è¡Œ
            self.global_scope = new_scope
            
            try:
                self.visit(func_node.body)
            except ReturnException as e:
                return_value = e.value
            finally:
                # æ¢å¤åŸä½œç”¨åŸŸ
                self.global_scope = saved_scope
                
            return return_value
```

æˆ‘ä»¬çš„è§£é‡Šå™¨äº®ç‚¹ï¼š

* **ä¼˜é›…çš„é—­åŒ…å®ç°** - ä½¿ç”¨è¯æ³•ä½œç”¨åŸŸæ•è·
* **è®¿é—®è€…æ¨¡å¼** - ä½¿ä»£ç ç»“æ„æ¸…æ™°ï¼Œä¾¿äºæ‰©å±•
* **å¼‚å¸¸å¤„ç†æ§åˆ¶æµ** - ä½¿ç”¨å¼‚å¸¸æ¥å¤„ç†returnã€breakå’Œcontinue

## ğŸ’» å¼€å‘è€…æŒ‡å—

### ä»£ç ç»“æ„

Evil Lang çš„ä»£ç ç»„ç»‡éµå¾ªæ¨¡å—åŒ–åŸåˆ™ï¼Œä¸»è¦æ¨¡å—åŒ…æ‹¬ï¼š

```
Evil-Lang/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lexer.py         # è¯æ³•åˆ†æå™¨
â”‚   â”œâ”€â”€ parser.py        # è¯­æ³•åˆ†æå™¨
â”‚   â”œâ”€â”€ ast.py           # æŠ½è±¡è¯­æ³•æ ‘å®šä¹‰
â”‚   â”œâ”€â”€ interpreter.py   # è§£é‡Šå™¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ errors.py        # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ builtins/        # å†…ç½®å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py  # å†…ç½®å‡½æ•°æ³¨å†Œ
â”‚   â”‚   â”œâ”€â”€ numeric.py   # æ•°å€¼ç›¸å…³å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ string.py    # å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°
â”‚   â”‚   â””â”€â”€ io.py        # è¾“å…¥è¾“å‡ºå‡½æ•°
â”œâ”€â”€ examples/            # ç¤ºä¾‹ç¨‹åº
â””â”€â”€ evil_lang.py         # ä¸»ç¨‹åºå…¥å£
```

### æ·»åŠ æ–°çš„å†…ç½®å‡½æ•°

Evil Lang çš„å†…ç½®å‡½æ•°ç³»ç»Ÿè®¾è®¡ä¸ºæ˜“äºæ‰©å±•ã€‚ä»¥ä¸‹æ˜¯æ·»åŠ æ–°å‡½æ•°çš„æ­¥éª¤ï¼š

1. **é€‰æ‹©æˆ–åˆ›å»ºé€‚å½“çš„æ¨¡å—**ï¼šåœ¨ `src/builtins/` ç›®å½•ä¸‹é€‰æ‹©åˆé€‚çš„æ¨¡å—ï¼Œæˆ–åˆ›å»ºæ–°æ¨¡å—ã€‚
2. **å®šä¹‰å‡½æ•°**ï¼šå‡½æ•°åº”è¯¥æ¥å—ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œå¹¶è¿”å›ç»“æœã€‚
   ```python
   def _my_new_function(args):
       """å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸² - è¯´æ˜å‡½æ•°çš„åŠŸèƒ½"""
       # å‚æ•°éªŒè¯
       if len(args) != 2:
           raise ValueError("myNewFunction requires exactly two arguments")
   
       # å®ç°é€»è¾‘
       result = args[0] + args[1]  # ç¤ºä¾‹é€»è¾‘
   
       # è¿”å›ç»“æœ
       return result
   ```
3. **æ³¨å†Œå‡½æ•°**ï¼šä½¿ç”¨ `register_builtin` å‡½æ•°å°†ä½ çš„æ–°å‡½æ•°æ³¨å†Œåˆ° Evil Lang ç¯å¢ƒä¸­ã€‚
   ```python
   # åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ 
   register_builtin('myNewFunction', _my_new_function)
   ```
4. **ç¡®ä¿æ¨¡å—è¢«å¯¼å…¥**ï¼šåœ¨ `src/builtins/__init__.py` ä¸­å¯¼å…¥ä½ çš„æ¨¡å—ã€‚
   ```python
   # åœ¨ __init__.py ä¸­
   from .numeric import *
   from .string import *
   from .io import *
   from .your_new_module import *  # å¦‚æœä½ åˆ›å»ºäº†æ–°æ¨¡å—
   ```
5. **ç¼–å†™æµ‹è¯•**ï¼šåˆ›å»ºæµ‹è¯•ç¨‹åºä»¥éªŒè¯ä½ çš„æ–°å‡½æ•°ã€‚
   ```javascript
   // åœ¨ examples/test_my_function.el ä¸­
   print(myNewFunction(10, 20));  // åº”è¯¥è¾“å‡º 30
   ```

### é”™è¯¯å¤„ç†

Evil Lang 1.0.1 ç‰ˆæœ¬å¼•å…¥äº†å¢å¼ºçš„é”™è¯¯å¤„ç†ç³»ç»Ÿã€‚åœ¨å®ç°æ–°åŠŸèƒ½æ—¶ï¼Œä½¿ç”¨é€‚å½“çš„é”™è¯¯ç±»ï¼š

```python
from ..errors import ValueError, TypeError, RuntimeError

# åœ¨ä½ çš„å‡½æ•°ä¸­
if not isinstance(args[0], (int, float)):
    raise TypeError("First argument must be a number", line, column)
```

è¿™å°†äº§ç”Ÿä¸€è‡´çš„ã€ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¹¶è‡ªåŠ¨æ”¶é›†è°ƒç”¨å †æ ˆä¿¡æ¯ã€‚

### è°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨ `--debug` æ ‡å¿—**ï¼šè¿è¡Œæ—¶æ·»åŠ  `--debug` æŸ¥çœ‹å†…éƒ¨æ‰§è¡Œç»†èŠ‚ã€‚
2. **åœ¨å†…ç½®å‡½æ•°ä¸­æ·»åŠ è°ƒè¯•è¾“å‡º**ï¼š
   ```python
   if '--debug' in sys.argv:
       print(f"DEBUG: args = {args}")
   ```
3. **ä½¿ç”¨ `format_error` æ–¹æ³•**ï¼šæŸ¥çœ‹æ ¼å¼åŒ–çš„é”™è¯¯ä¿¡æ¯ã€‚
   ```python
   try:
       # ä»£ç 
   except EvilLangError as e:
       print(e.format_error())
   ```

## ğŸ† æˆ‘ä»¬å…‹æœçš„æŒ‘æˆ˜

å¼€å‘ Evil Lang çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°å¹¶è§£å†³äº†è®¸å¤šæœ‰è¶£çš„æŒ‘æˆ˜ï¼š

### 1. é—­åŒ…å®ç°çš„æŒ‘æˆ˜

é—­åŒ…æ˜¯ Evil Lang ä¸­æœ€å¤æ‚çš„ç‰¹æ€§ä¹‹ä¸€ã€‚ä¸»è¦æŒ‘æˆ˜æ˜¯ï¼šå¦‚ä½•è®©å‡½æ•°"è®°ä½"å®ƒè¢«åˆ›å»ºæ—¶çš„ç¯å¢ƒï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼šæˆ‘ä»¬åˆ›å»ºäº† `FuncRef` ç±»ï¼Œå®ƒä¸ä»…å­˜å‚¨å‡½æ•°å®šä¹‰ï¼Œè¿˜ä¿å­˜äº†å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸå¿«ç…§ï¼š

```python
class FuncRef:
    def __init__(self, func_node, lexical_scope=None):
        self.func_node = func_node  # å‡½æ•°å®šä¹‰
        self.lexical_scope = lexical_scope  # è¯æ³•ä½œç”¨åŸŸ
```

å½“å‡½æ•°è¿”å›å†…éƒ¨å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æ•è·å½“å‰ç¯å¢ƒå¹¶ä¸å†…éƒ¨å‡½æ•°ç»‘å®šï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªçœŸæ­£çš„é—­åŒ…ã€‚

### 2. é”™è¯¯å¤„ç†å’Œè°ƒè¯•

åœ¨å¤æ‚ç¨‹åºä¸­å®šä½é”™è¯¯æ˜¯ä¸€å¤§æŒ‘æˆ˜ï¼Œå°¤å…¶å¯¹è¯­è¨€åˆå­¦è€…ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæˆ‘ä»¬å®ç°äº†è¯¦ç»†çš„é”™è¯¯æŠ¥å‘Šç³»ç»Ÿï¼š

* è®°å½•æ¯ä¸ªæ ‡è®°çš„è¡Œå·å’Œåˆ—å·
* æä¾›ä¸Šä¸‹æ–‡ç›¸å…³çš„é”™è¯¯ä¿¡æ¯
* æ·»åŠ  `--debug` æ¨¡å¼ï¼Œæ˜¾ç¤ºè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æçš„ä¸­é—´ç»“æœ
* åœ¨ 1.0.1 ç‰ˆæœ¬ä¸­å¢åŠ äº†è°ƒç”¨å †æ ˆè·Ÿè¸ªå’Œä»£ç ç‰‡æ®µé«˜äº®

### 3. é€’å½’å’Œæ ˆæº¢å‡º

é€’å½’æ˜¯ç¼–ç¨‹è¯­è¨€çš„é‡è¦ç‰¹æ€§ï¼Œä½†ä¸å—æ§çš„é€’å½’å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæˆ‘ä»¬ä½¿ç”¨Pythonçš„å¼‚å¸¸æœºåˆ¶æ¥å¤„ç†æ§åˆ¶æµï¼Œé¿å…äº†æ·±åº¦é€’å½’çš„é—®é¢˜ï¼Œå¹¶ä½¿å®ç°æ›´åŠ ç®€æ´ã€‚

### 4. Unicodeæ”¯æŒ

è®¸å¤šæ•™è‚²ç”¨è§£é‡Šå™¨åªæ”¯æŒASCIIï¼Œé™åˆ¶äº†å›½é™…åŒ–åº”ç”¨ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæˆ‘ä»¬ä»ä¸€å¼€å§‹å°±è®¾è®¡äº†å®Œæ•´çš„Unicodeæ”¯æŒï¼š

* ä½¿ç”¨UTF-8ç¼–ç è¯»å–æºæ–‡ä»¶
* æ­£ç¡®å¤„ç†Unicodeæ ‡è¯†ç¬¦å’Œå­—ç¬¦ä¸²
* æ”¯æŒä¸­æ–‡ç­‰éASCIIå­—ç¬¦çš„å˜é‡åå’Œè¾“å‡º

## ğŸ’¡ è®¾è®¡ç†å¿µ

Evil Lang çš„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒç†å¿µï¼š

### 1. æ•™è‚²ä¼˜å…ˆ

Evil Lang çš„é¦–è¦ç›®æ ‡æ˜¯æ•™è‚²ã€‚æˆ‘ä»¬å®å¯ç‰ºç‰²ä¸€äº›æ€§èƒ½å’ŒåŠŸèƒ½ï¼Œä¹Ÿè¦ä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç†è§£æ€§ã€‚æ¯ä¸ªç»„ä»¶éƒ½è¢«è®¾è®¡ä¸º"è‡ªè§£é‡Š"çš„ï¼Œè®©è¯»è€…å¯ä»¥è½»æ¾ç†è§£å…¶å·¥ä½œåŸç†ã€‚

### 2. å¹³è¡¡ç†Ÿæ‚‰æ€§å’Œç®€æ´æ€§

æˆ‘ä»¬å€Ÿé‰´äº† JavaScript å’Œ C çš„è¯­æ³•ï¼Œä½¿åˆå­¦è€…æ„Ÿåˆ°ç†Ÿæ‚‰ï¼Œä½†åŒæ—¶å‰”é™¤äº†é‚£äº›å¤æ‚æˆ–å®¹æ˜“æ··æ·†çš„ç‰¹æ€§ï¼Œä¿æŒè¯­è¨€çš„ç®€æ´å’Œä¸€è‡´æ€§ã€‚

### 3. æ¸è¿›å¼å¤æ‚åº¦

Evil Lang çš„ç‰¹æ€§æŒ‰å¤æ‚åº¦æ’åˆ—ï¼Œè®©å­¦ä¹ è€…å¯ä»¥å¾ªåºæ¸è¿›ï¼š

* åŸºæœ¬å˜é‡å’Œè¡¨è¾¾å¼
* æ¡ä»¶å’Œå¾ªç¯
* å‡½æ•°å’Œé€’å½’
* æ•°ç»„å’Œå¯¹è±¡
* é«˜é˜¶å‡½æ•°å’Œé—­åŒ…

### 4. å¯è§†åŒ–å’Œäº¤äº’æ€§

æˆ‘ä»¬é‡è§†ç”¨æˆ·ä½“éªŒï¼Œæä¾›ä¸°å¯Œçš„è¾“å‡ºå’Œäº¤äº’åŠŸèƒ½ï¼š

* å†…ç½® `print` å’Œ `input` å‡½æ•°
* è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
* è°ƒè¯•æ¨¡å¼ä¸‹çš„å¯è§†åŒ–è·Ÿè¸ª

## ğŸ”® æœªæ¥å‘å±•æ–¹å‘

Evil Lang ä»åœ¨ç§¯æå‘å±•ä¸­ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬è®¡åˆ’çš„è¿­ä»£æ–¹å‘ï¼š

### 1. è¯­è¨€å¢å¼º

* **æ¨¡å—ç³»ç»Ÿ** - å®ç°å¯¼å…¥å’Œå¯¼å‡ºæœºåˆ¶ï¼Œæ”¯æŒä»£ç å¤ç”¨ï¼ˆ1.1.0ç‰ˆæœ¬è®¡åˆ’ï¼‰
* **ç±»å’Œå¯¹è±¡ç³»ç»Ÿ** - æ·»åŠ ç®€å•ä½†åŠŸèƒ½å®Œæ•´çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ”¯æŒ
* **å¼‚å¸¸å¤„ç†** - æ·»åŠ  try/catch æœºåˆ¶
* **æ ‡å‡†åº“** - æ„å»ºå¼ºå¤§çš„æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬æ•°å­¦ã€å­—ç¬¦ä¸²å¤„ç†å’Œæ–‡ä»¶I/O
* **å¼‚æ­¥ç¼–ç¨‹** - å®ç° Promise æˆ–ç±»ä¼¼æœºåˆ¶

### 2. å·¥å…·å’Œç”Ÿæ€

* **æ”¹è¿›REPLç¯å¢ƒ** - å¢å¼ºäº¤äº’å¼è§£é‡Šå™¨çš„åŠŸèƒ½ï¼Œå¦‚å†å²è®°å½•å’Œè‡ªåŠ¨å®Œæˆ
* **VSCodeæ’ä»¶** - è¯­æ³•é«˜äº®å’Œè‡ªåŠ¨å®Œæˆ
* **è°ƒè¯•å™¨** - å›¾å½¢åŒ–çš„æ­¥è¿›æ‰§è¡Œå’Œå˜é‡ç›‘è§†
* **åŒ…ç®¡ç†å™¨** - åˆ†äº«å’Œé‡ç”¨ Evil Lang ä»£ç 

### 3. æ€§èƒ½ä¼˜åŒ–

* **å­—èŠ‚ç ç¼–è¯‘å™¨** - å°†ASTç¼–è¯‘ä¸ºä¸­é—´å­—èŠ‚ç ï¼Œæå‡æ‰§è¡Œé€Ÿåº¦
* **ç®€å•JITç¼–è¯‘** - å®ç°çƒ­ç‚¹ä»£ç çš„å³æ—¶ç¼–è¯‘
* **å†…å­˜ä¼˜åŒ–** - å‡å°‘å¯¹è±¡åˆ†é…å’Œå¤åˆ¶

### 4. æ•™è‚²èµ„æº

* **äº¤äº’å¼æ•™ç¨‹** - å¾ªåºæ¸è¿›å­¦ä¹ è¯­è¨€ç‰¹æ€§
* **åœ¨çº¿è§£é‡Šå™¨** - æ— éœ€å®‰è£…å³å¯ä½“éªŒ
* **ç¼–è¯‘åŸç†è¯¾ç¨‹** - ä½¿ç”¨Evil Langè®²è§£ç¼–ç¨‹è¯­è¨€å®ç°

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

Evil Lang æ˜¯ä¸€ä¸ªç¤¾åŒºé©±åŠ¨çš„é¡¹ç›®ï¼Œæˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼

### å‚ä¸æ–¹å¼

1. **ä»£ç è´¡çŒ®**
   * ä¿®å¤bugæˆ–å®ç°æ–°ç‰¹æ€§
   * ä¼˜åŒ–ç°æœ‰å®ç°
   * æ·»åŠ æµ‹è¯•ç”¨ä¾‹
2. **æ–‡æ¡£æ”¹è¿›**
   * å®Œå–„æ•™ç¨‹å’Œç¤ºä¾‹
   * ç¿»è¯‘æ–‡æ¡£
   * åˆ›å»ºå­¦ä¹ èµ„æº
3. **ä½¿ç”¨åé¦ˆ**
   * æŠ¥å‘Šé—®é¢˜
   * æå‡ºæ”¹è¿›å»ºè®®
   * åˆ†äº«ä½¿ç”¨ç»éªŒ

### æäº¤æµç¨‹

1. Fork ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b my-new-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add some feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin my-new-feature`
5. æäº¤ Pull Request

æˆ‘ä»¬ç‰¹åˆ«æ¬¢è¿æ•™è‚²å·¥ä½œè€…å’Œå­¦ç”Ÿå‚ä¸ï¼Œå…±åŒæ‰“é€ æ›´å¥½çš„ç¼–ç¨‹è¯­è¨€å­¦ä¹ å·¥å…·ï¼

## ğŸ“„ è®¸å¯è¯

Evil Lang é‡‡ç”¨ MIT è®¸å¯è¯å¼€æºã€‚

```
MIT License

Copyright (c) 2025 Evil0ctal

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files...
```

è¯¦è§ [LICENSE](https://github.com/Evil0ctal/Evil-Lang/blob/main/LICENSE) æ–‡ä»¶ã€‚

---

<p align="center">
  <sub>ç”¨ â¤ï¸ å’Œ Python åˆ¶ä½œ - Evil0ctal</sub>
</p>
